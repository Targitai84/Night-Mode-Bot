# Telegram Night Mode Bot
![PHP](https://img.shields.io/badge/PHP-7.4+-blue)
![GitHub release](https://img.shields.io/github/v/release/Targitai84/nightmode-bot)
![License](https://img.shields.io/badge/License-MIT-green)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–æ—Ç –¥–ª—è Telegram-–≥—Ä—É–ø–ø, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –∏ –≤—ã–∫–ª—é—á–∞–µ—Ç ¬´–Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º¬ª –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.  
–ë–æ—Ç —É–º–µ–µ—Ç –∑–∞–ø—Ä–µ—â–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–æ—á—å—é –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—Ç—å —á–∞—Ç —É—Ç—Ä–æ–º.  
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —è–∑—ã–∫–æ–≤ (RU/EN), —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã –∏ cron-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ –≥—Ä—É–ø–ø—ã (–æ—Ç -12 –¥–æ +14).
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä—è–º–æ –∏–∑ Telegram:
  - `/set 23:00-07:00` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ—á–Ω–æ–π –ø–µ—Ä–∏–æ–¥
  - `/tz +3` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å timezone
  - `/lang RU|EN` ‚Äî —Å–º–µ–Ω–∏—Ç—å —è–∑—ã–∫ –±–æ—Ç–∞
  - `/bot on|off` ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —á–∞—Ç –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏/–≤—ã–∫–ª—é—á–µ–Ω–∏–∏ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª—ã.
- –û—Ç–¥–µ–ª—å–Ω—ã–µ JSON-—Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ.
- –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚Äî –æ–±—ã—á–Ω—ã–π PHP –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
/
‚îú‚îÄ‚îÄ index.php          # –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ Telegram webhook
‚îú‚îÄ‚îÄ cron_job.php       # –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è CRON
‚îú‚îÄ‚îÄ groups/            # –∫–æ–Ω—Ñ–∏–≥–∏ –≥—Ä—É–ø–ø
‚îÇ   ‚îî‚îÄ‚îÄ <group_id>.json
‚îú‚îÄ‚îÄ settings/
‚îÇ   ‚îú‚îÄ‚îÄ settings.json  # –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ lang/
‚îÇ       ‚îú‚îÄ‚îÄ ru.json
‚îÇ       ‚îî‚îÄ‚îÄ en.json
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îî‚îÄ‚îÄ YYYY-MM-DD.log
‚îú‚îÄ‚îÄ telegram.php       # sendMessage, setChatPermissions, utils
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç

```bash
git clone https://github.com/Targitai84/night-mode-bot.git
cd nightmode-bot
```

###  2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º settings.json
```bash
{
  "bot_token": "YOUR_TELEGRAM_BOT_TOKEN",
  "log_level": "info",
  "default_group_settings": {
    "lang": "EN",
    "isadmin": false,
    "enabled": false,
    "bot_enabled": false,
    "lock_from": "23:00",
    "lock_to": "07:00",
    "timezone": "+0",
    "locked": false,
    "last_action": "none"
  },
  "permissions_default": {
    "can_send_messages": true,
    "can_send_media_messages": true,
    "can_send_polls": true,
    "can_send_other_messages": true,
    "can_add_web_page_previews": true,
    "can_change_info": true,
    "can_invite_users": true,
    "can_pin_messages": true,
    "can_manage_topics": true
  },
  "permissions_night": {
    "can_send_messages": false,
    "can_send_media_messages": false,
    "can_send_polls": false,
    "can_send_other_messages": false,
    "can_add_web_page_previews": false,
    "can_change_info": false,
    "can_invite_users": false,
    "can_pin_messages": false,
    "can_manage_topics": false
  }
}
```
###  3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook
curl -F "url=https://yourdomain.com/bot.php" \
     https://api.telegram.org/botYOUR_TOKEN/setWebhook

###  4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CRON
```bash
crontab -e
*/5 * * * * /usr/bin/php /path/to/cron_job.php
```
#### 5. –ö–æ–º–∞–Ω–¥—ã
| –ö–æ–º–∞–Ω–¥–∞                 | –û–ø–∏—Å–∞–Ω–∏–µ                                    | 
| ----------------------- | --------------------------------------------| 
| `/info`                 | –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏                  |
| `/set HH:MM-HH:MM`      | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞             |
| `/tz +3`                | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å                     | 
| `/lang RU` / `/lang EN` | –°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫ —Å–æ–æ–±—â–µ–Ω–∏–π                      | 
| `/bot on off`           | –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –≤ –≥—Ä—É–ø–ø–µ    |
| `/enable`               | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º         |
| `/disable`              | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å                     |


### 6.  –ü—Ä–∞–≤–∞

–ë–æ—Ç—É –Ω—É–∂–Ω–æ –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≥—Ä—É–ø–ø—ã
—Å –ø—Ä–∞–≤–∞–º–∏: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏.

### 7. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

PHP 7.4+

Webhook-—Å–µ—Ä–≤–µ—Ä (Apache/Nginx)

Cron –≤ —Å–∏—Å—Ç–µ–º–µ

HTTPS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Telegram)
